<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />
  <title> &middot; Yacy Old Forum Archiv</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->
  <link rel="stylesheet" href="/css/blackburn.css">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
  
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  
  
</head>
<body>
<div id="layout">
  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">
  
  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>
  <div class="pure-menu social">
  <ul class="pure-menu-list">
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>
  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>
</div>
  <div id="main">
<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  
<h1 id="classic-nes-series-anti-emulation-measures">Classic NES Series Anti-Emulation Measures</h1>
<p>Date: 2014-12-30 07:31:00</p>
<p><a href="https://endrift.com/mgba/2014/12/28/classic-nes/">Emulator countermeasures are so vicious because the stakes are so
low.</a></p>
<blockquote>
<p>As it turns out, these games exploit several tricks and undefined
behaviors that make emulating them challenging. This appears to be a
deliberate attempt to dissuade copying these games. In the interest of
accuracy, I have painstakingly investigated, implemented and
chronicled all of the unusual things I\&rsquo;ve found these games to do.
[...]</p>
<p>The processor in the Game Boy Advance has a pipeline that has three
relevant stages for accurate emulation: fetching, decoding and
executing. In the fetching stage, the memory bus is queried for the
memory associated with an instruction. This is then passed to the
decoding stage, where the processor figures out which instruction it
is. Finally, the processor actually executes the instruction. A na√Øve
interpreter may merge all three stages, either for hypothesized speed
reasons, or just an uninformed idea of how processors work. mGBA was
actually assuming the decoding and execution stages were combined
until recently. However, an important observation was made while
digging through the Classic NES Series games\&rsquo; code: the game was
modifying an instruction that was very close in proximity to where
code was being executed already. [...]</p>
<p>What\&rsquo;s imperative to understanding what\&rsquo;s going on in this block of
code is to realize that, once the instruction has been fetched by the
pipeline, changing the memory that backs that address is irrelevant.
This is similar to how cache coherence works, but is even more
stringent. This means that if your pipeline is long enough, the
instruction that enters into the pipeline during the write is the one
that stores 255. If it\&rsquo;s too short, it stores 0. As it turns out, the
games will fail to boot if it finds the value 0 in register r1, but
boots fine if it\&rsquo;s 255.</p>
</blockquote>
<p><a href="http://www.jwz.org/blog/2013/07/this-is-an-anim-gif-of-an-apple-playing-an-anim-gif/">Previously</a>,
<a href="http://www.jwz.org/blog/2009/09/312-inches-is-enough/">previously</a>,
<a href="http://www.jwz.org/blog/2007/04/6502asmcom/">previously</a>.</p>
</div>
</div>
</div>
<script src="js/ui.js"></script>
</body>
</html>
