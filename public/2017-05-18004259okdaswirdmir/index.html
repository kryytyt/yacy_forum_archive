<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />
  <title> &middot; Yacy Old Forum Archiv</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->
  <link rel="stylesheet" href="/css/blackburn.css">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
  
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  
  
</head>
<body>
<div id="layout">
  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">
  
  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>
  <div class="pure-menu social">
  <ul class="pure-menu-list">
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>
  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>
</div>
  <div id="main">
<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  
<h1 id="ok-das-wird-mir-jetzt-hier-gerade-zu-krass-besonders">OK, das wird mir jetzt hier gerade zu krass. Besonders ...</h1>
<p>Date: 2017-05-18 00:42:59</p>
<p>OK, das wird mir jetzt hier gerade zu krass. Besonders niederschmetternd
war ein Leserbrief zu Alternativlos 39 aus einem Elektronik-KMU vom
Lande, der da die Apokalypse grafisch beschrieben hat, und dann am
Schluss meinte, ich solle das bitte nicht ins Blog tun, das könne man
rückverfolgen. Nachdem er als Sahnehäubchen erwähnte, dass die Firma ja
jetzt IOT-Geräte bauen will.</p>
<p>Daher jetzt auch mal was Konstruktives. Eine Einsendung von Kris
Köhntopp, wie man Rollout und Testing richtig macht.</p>
<blockquote>
<p>Victim Blaming: »Patching is hard? Yes&mdash;and every major tech player,
no matter how sophisticated they are, has had catastrophic failures
when they tried to change something. Google once bricked Chromebooks
with an update. A Facebook configuration change took the site offline
for 2.5 hours. Microsoft ruined network configuration and partially
bricked some computers; even their newest patch isn\&rsquo;t trouble-free.
An iOS update from Apple bricked some iPad Pros. Even Amazon knocked
AWS off the air.«</p>
<p>Wo ich arbeite haben wir dieselbe Beobachtung gemacht. Wir haben ein
Outage Budget, d.h. wir messen die tatsächlichen Einnahmen und
vergleichen mit den vorhergesagten Einnahmen. Ist durch einen
mißglückten Rollout ein Einnahmeausfall zu verzeichnen, buchen wir das
vom Outage Budget ab.</p>
<p>Wir versuchen das so gut als möglich zu treffen. Wenn wir mehr Outage
als geplant haben, ist das zu viel Risk Taking, wenn wir zu wenig
Outage hatten, ist das nicht genug Risk Taking und wir sind zu langsam
und complacent.</p>
<p>Häufige Rollouts sind kleine Changes und die sind viel besser zu
kontrollieren als große unübersichtliche Changes. Daher versuchen wir,
so oft als möglich einen Rollout (== Patch) zu machen und so die
Patches möglichst klein zu halten.</p>
<p>Wenn wir Rollout-Probleme haben, dann meist in den Subsystemen, die
wir nicht oft genug ausrollen und in denen dann sekundäre Changes (==
Library Changes, die mit sich schneller ändernden Systemen geteilt
werden) den Rollout zerknallen. Die Lösung ist für uns, so was auch
dann auszurollen wenn sich im Code selbst nix geändert hat (also
Dependency-Änderungen auszurollen).</p>
<p>Alles in allem ist das eine sehr anschauliche Darstellung von
Technical Debt: Je größer der Diff zwischen ausgerollt und trunk ist,
um zu wahrscheinlicher ist es, daß Trunk in Production explodiert.</p>
<p>Um Patching sicher zu machen, muß man es oft tun.</p>
<p>Wenn man oft patchen möchte, müssen Patches und deren Rollouts ein
Operativer Prozeß und kein Upgrade-Migrationsprojekt sein.</p>
<p>Wenn Rollouts ein operative Prozeß sein sollen, dann muß man Testen in
der Produktion sicher und überlebbar machen.</p>
<p>Um Testen in der Produktion sicher zu machen, muß man:</p>
<ul>
<li>das Austeilen von Code und die Aktivierung von Code trennen, also
Feature Flags und Experiments einführen,</li>
<li>sich ändernde persistente Datenstrukturen doppelt führen (alte und
neue Version gleichzeitig und parallel aktualisieren, sodaß alter
und neuer Code coexistieren können).</li>
<li>Reporting und Monitoring exzessiv ausbauen und den Monitoring Lag
(Event Timestamp vs. Timestamp in dem das Event im Monitoring auf
dem Operator Screen sichtbar wird) mitloggen und Anzeigen
(\&ldquo;Monitoring Framerate einblenden\&ldquo;)</li>
<li>und den Leuten klar machen, daß es wichtig ist, eine Fehlerkultur
zu etablieren (\&ldquo;blameless postmortem\&rdquo; einführen und
durchsetzen).</li>
<li>Canaries</li>
<li>Overcapacity</li>
<li>nur 2 Versionen aktiv zur Zeit (also nicht drei- oder mehrphasige
Rollouts laufen haben)</li>
</ul>
<p>Alles kein Hexenwerk eigentlich.</p>
</blockquote>
<p>Ein Canary ist ein Kanarienvogel im Kohleminen-Sinn. Man schiebt die
neue Version nicht gleich auf das ganze Rechenzentrum, sondern erstmal
nur auf ein paar Kisten, und da routet man nur ein paar User hin. Und
guckt, ob es platzt. Das ist an sich eine gute Praxis, aber man muss
aufpassen, dass man das nur kurzzeitig macht. Ich habe schon Firmen
gesehen, die praktisch permanent diverse Versionen parallel ausgerollt
hatten. Das ist nicht gut.</p>
<p>Overcapacity heißt einfach, dass man nicht am Limit fährt mit seiner
Hardware, damit man eine Performance-Regression zur Not mal kurzzeitig
abfangen kann.</p>
<p>Stört euch bitte nicht an dem Denglisch, das ist in der Ops-Abteilung
von internationalen Firmen durchaus normal :-)</p>
</div>
</div>
</div>
<script src="js/ui.js"></script>
</body>
</html>
