<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />
  <title> &middot; Yacy Old Forum Archiv</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->
  <link rel="stylesheet" href="/css/blackburn.css">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
  
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  
  
</head>
<body>
<div id="layout">
  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">
  
  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>
  <div class="pure-menu social">
  <ul class="pure-menu-list">
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>
  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>
</div>
  <div id="main">
<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  
<h1 id="ich-hatte-im-jahre-2006-einen-bug-gegen-gcc-gefiled">Ich hatte im Jahre 2006 einen Bug gegen gcc gefiled, ...</h1>
<p>Date: 2014-07-16 15:35:25</p>
<p>Ich hatte im Jahre 2006 einen Bug gegen gcc gefiled, weil sie einen
Range-Check wegoptimiert haben. Ich fand das damals völlig unakzeptabel,
und staunte nicht schlecht, als mir die gcc-Maintainer erklärten, dass
das schon seine Richtigkeit habe, weil der wegoptimierte Range-Check ja
streng genommen im Überlauffall auf undefiniertem Verhalten basiere.
<a href="http://blog.fefe.de/?ts=babc3ebb">Hier ist mein Blogposting von
damals</a>. Das Assert hat damals
angeschlagen. Jetzt habe ich gerade einen ähnlichen Fall bei einem
Kunden und wollte da gerade einen Bug filen, dass Compiler das
wegoptimieren, und prüfe sicherheitshalber nochmal nach und stelle fest:
gcc 4.9 optimiert den Check gar nicht mehr weg.</p>
<p>Nanu? Da hätte mir ja auch mal jemand Bescheid sagen können!</p>
<p>Letztlich muss man Code dieser Art natürlich nach wie vor vermeiden,
weil man sich eben nicht darauf verlassen kann, dass nicht irgendein
Language Lawyer bei irgendeinem Compiler-Hersteller so argumentiert und
den Check wegoptimiert.</p>
<p>Das gilt für Pointer-Arithmetik und für signed int-Typen. Bei meinen
Tests gerade hat übrigens auch LLVM das nicht wegoptimiert, dabei
<a href="http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html">hatten die vor ein paar Jahren erst in ihrem Blog
verteidigt</a>,
auf Basis von undefiniertem Verhalten in C zu optimieren.</p>
<p>Der wohldefinierte, sichere Weg ist übrigens, die Zeiger vor der
Arithmetik zu uintptr_t zu casten.</p>
</div>
</div>
</div>
<script src="js/ui.js"></script>
</body>
</html>
