<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />

  <title> &middot; Yacy Old Forum Archiv</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  

  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  

<h1 id="english-monitoring-yacy-in-cacti">English â€¢ Monitoring Yacy in Cacti</h1>

<p>Date: 2014-06-06 14:08:20</p>

<p>After using Cacti to monitor the
server(<a href="http://forum.yacy-websuche.de/viewtopic.php?f=23&amp;t=5201">http://forum.yacy-websuche.de/viewtopic.php?f=23&amp;t=5201</a>), I
started monitoring Yacy itself.<br />
There are two possible aproaches when you want to use Cacti for
monitoring: by collecting monitoring data thru any SNMP OID (either
pre-package or custom ones) or thru a script.<br />
I\&rsquo;ve chosen the second alternative (not exactly sure why
<img src="http://forum.yacy-websuche.de/images/smilies/icon_rolleyes.gif" alt=":roll:" title="Rolling Eyes" />
) and I\&rsquo;ve been collecting and monitoring Yacy data from two sources:
<a href="http://myserver:8090/Network.xml">http://myserver:8090/Network.xml</a> and
<a href="http://myserver:8090/PerformanceMemory_p.xml">http://myserver:8090/PerformanceMemory_p.xml</a>.<br />
Below follow some screenshots of what you get, as well as attachments
for the Cacti templates and the scripts for those who want to try.<br />
DISCLAIMER: Those two C scripts were my first C programs (I\&rsquo;m an old
COBOL programmer
<img src="http://forum.yacy-websuche.de/images/smilies/icon_cool.gif" alt="8-)" title="Cool" />
so they probably can be optimized and better stylished. Nevertheless,
they\&rsquo;re running smoothly (at least in my Ubuntu 14.04 server).<br />
<br />
<img src="http://i808.photobucket.com/albums/zz1/glapido/Screenshotfrom2014-06-06073618_zpsb1861f42.png" alt="Bild" /><br />
<br />
<img src="http://i808.photobucket.com/albums/zz1/glapido/Screenshotfrom2014-06-06073642_zpsff04ff88.png" alt="Bild" /><br />
<br />
(Note: The vertical gap in the graphs is a power outage that happened
yesterday)<br />
<br />
In Cacti, you can expand any of the graphs above by clicking on them.
Below, a screenshot of one of them:<br />
<br />
<img src="http://i808.photobucket.com/albums/zz1/glapido/Screenshotfrom2014-06-06073957_zps41f2c4c5.png" alt="Bild" /><br />
<br />
Also, I had some minor issues regarding file locks, when executing the
scripts, due to the way I designed the data collecting process: instead
of directly reading the web xml produced by Yacy (too much for my zero
knowledge in C), I chose to create two crontab entries to download the
xml from Yacy to local files aimed to be the script inputs. The issue
was that sometimes Cacti was executing the scripts at the exact same
time as wget, so sometimes they were not producing any data. I solved
this by using a temporary file and delaying the download process by some
seconds. The two crontab entries are:<br />
<br />
* * * * * sleep 30; wget -O /home/user/bin/tmp.xml
<a href="http://ipaddress:8090/Network.xml">http://ipaddress:8090/Network.xml</a> &gt; /home/user/log/yacy_wget.log
2&gt;&1; mv /home/user/bin/tmp.xml /home/user/bin/Network.xml<br />
* * * * * sleep 30; curl -o /home/user/bin/tmp1.xml -u
admin:password <a href="http://ipaddress:8090/PerformanceMemory_p.xml">http://ipaddress:8090/PerformanceMemory_p.xml</a> &gt;
/home/user/log/yacy_curl.log 2&gt;&1; mv /home/user/bin/tmp1.xml
/home/user/bin/PerformanceMemory_p.xml<br />
<br />
(you may want to customize user, ipaddress and password to your linux
user, server ip and yacy admin password, respectively)<br />
<br />
The scrips run every minute to be in sync with Cacti polling interval,
which, in my case, is a 1 minute interval.</p>

<p>Statistik: Verfasst von
<a href="http://forum.yacy-websuche.de/memberlist.php?mode=viewprofile&amp;u=8876">oneaty</a>
&mdash; Fr Jun 06, 2014 1:08 pm</p>

<hr />

</div>

</div>
</div>
<script src="js/ui.js"></script>






</body>
</html>

