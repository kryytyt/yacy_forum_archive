<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />
  <title> &middot; Yacy Old Forum Archiv</title>
  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->
  <link rel="stylesheet" href="/css/blackburn.css">
  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
 
  
  
  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />
  
  
</head>
<body>
<div id="layout">
  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">
  
  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>
  <div class="pure-menu social">
  <ul class="pure-menu-list">
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    
    
    
    
    
    
    
    
    
    
    
    
    
  </ul>
</div>
  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>
</div>
  <div id="main">
<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  
<h1 id="fragen-und-antworten-re-yacy-als-proxy">Fragen und Antworten • Re: YaCy als Proxy?</h1>
<p>Date: 2014-10-24 09:53:20</p>
<p>Hallo,<br />
<br />
ruhig geworden um dieses Thema. Da ich in den letzten Tagen intensiv an
meinem Weiterleitungsmechanismus gearbeitet habe und somit auf sehr
viele verschiedene YaCy-Peers gekommen bin kann ich schreiben das der
Fehler 403 insbesondere bei IPv6 sehr häufig auftritt. Aus meiner Sicht
besteht da wirklich Handlungsbedarf. Ganz offensichtlich hat YaCy
Probleme damit dem Host-Parameter im HTTP-Request zuverlässig anzusehen
ob ein Zugriff den Peer selber meint oder ob ein Zugriff per Proxy
behandelt werden soll. Als erfahrener Programmierer in den Bereichen
TCP/IP-Kommunikation und HTTP-Protokoll muss ich auch ehrlich sagen das
ich es, gerade im Hinblick auf IPv6, für nahezu ausgeschlossen halte das
dieses Problem unter Beibehaltung der momentanen Architektur überhaupt
korrekt und zuverlässig lösbar ist. Aus meiner persönlichen Sicht gibt
es verschiedene Möglichkeiten dieses Problem anzugehen:<br />
</p>
<ol>
<li>Der Proxy muss von dem normalen Port auf dem der YaCy-Peer selber
erreichbar ist runter, das lässt sich auf zwei Wegen erreichen:
a.  der Proxy muss auf einen anderen zusätzlichen Port umziehen, das
    wäre aus meiner Sicht kein allzu großes Problem da der Proxy eh
    nur vom lokalem Netz benutzt wird und dieser Port demzufolge
    auch nicht über die Seedlisten u.ä. nach außen kommuniziert
    werden darf, es sollte in Java auch kein Problem sein auf zwei
    verschiedenen Ports auf Anfragen zu warten
b.  den Proxy komplett entfernen</li>
<li>Wenn der Proxy in der Peer-Konfiguration ausgeschallten ist muss
auch die Erkennungslogik im HTTP-Server (für Proxy ja/nein)
ausgeschallten werden damit der problematische Fehler-Code 403
verschwindet. Das würde bedeuten das bei ausgeschalltenem Proxy die
Auswertung des Host-Parameters im HTTP-Request komplett entfallen
soll und jeder Zugriff grundsätzlich vom Peer selber beantwortet
wird. Wenn nicht existierende URLs angefragt werden kommt eben ein
404-Fehler zurück aber bei gültigen Zugriffen (und genau da ist das
Problem) kommt dafür kein 403-Fehler mehr.</li>
</ol>
<p><br />
Ich weiß ich mache mich hier unbeliebt wenn ich Änderungen an dem
internen Proxy vorschlage aber da der Fehler 403 bei
[gültigen]{style=&ldquo;text-decoration: underline&rdquo;} Zugriffen, gerade bei
IPv6, häufig auftritt und das vor allem bei Peers die den Proxy
eigentlich abgeschalltet haben, sehe ich an diesem Punkt wirklich
Handlungsbedarf. Als effektivsten Weg dieses Problem anzugehen würde ich
persönlich ja Variante 1b bevorzugen aber das stößt hier bekanntermaßen
auf Widerspruch. Deswegen möchte ich empfehlen möglichst zeitnah die
Variante 2 umzusetzen (um wenigstens die offensichtlich falschen
403-Fehler zu beseitigen) und dann könnte immer noch diskutiert werden
ob die Variante 1a als zuverlässige Endlösung dieses Problems angegangen
werden kann oder ob es noch andere Alternativen gibt.<br />
<br />
Es geht mir hier wirklich nicht darum einigen YaCy-Usern lieb gewordene
Gewohnheiten streitig zu machen, sondern es geht mir darum für einen
kniffligen Bug in YaCy eine möglichst schnelle und halbwegs zuverlässige
Lösung zu finden.<br />
Wenn jemand alternative Vorschläge hat würde ich die hier gerne
diskutieren.<br />
<br />
Grüße<br />
Erik</p>
<p>Statistik: Verfasst von
<a href="http://forum.yacy-websuche.de/memberlist.php?mode=viewprofile&amp;u=9480">Erik_S</a>
&mdash; Fr Okt 24, 2014 8:53 am</p>
<hr />
</div>
</div>
</div>
<script src="js/ui.js"></script>
</body>
</html>
