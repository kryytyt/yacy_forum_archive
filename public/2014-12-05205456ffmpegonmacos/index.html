<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="generator" content="Hugo 0.37.1" />

  <title> &middot; Yacy Old Forum Archiv</title>

  
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/pure-min.css">

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-old-ie-min.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pure/1.0.0/grids-responsive-min.css">
  <!--<![endif]-->

  <!--[if lte IE 8]>
  <link rel="stylesheet" href="/css/side-menu-old-ie.css">
  <![endif]-->
  <!--[if gt IE 8]><!-->
  <link rel="stylesheet" href="/css/side-menu.css">
  <!--<![endif]-->

  <link rel="stylesheet" href="/css/blackburn.css">

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

  
  <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet" type="text/css">

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

 
  

  

  <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon" />

  
  

</head>


<body>
<div id="layout">

  
<a href="#menu" id="menuLink" class="menu-link">
  
  <span></span>
</a>
<div id="menu">

  

  <div class="pure-menu">
    <ul class="pure-menu-list">
      
      
        <li class="pure-menu-item">
          <a class="pure-menu-link" href="/"><i class='fa fa-home fa-fw'></i>Home</a>
      
        </li>
      
    </ul>
  </div>

  <div class="pure-menu social">
  <ul class="pure-menu-list">

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://twitter.com/http://twitter.com/yacy_search" target="_blank"><i class="fa fa-twitter-square fa-fw"></i>Twitter</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <li class="pure-menu-item">
      <a class="pure-menu-link" href="https://github.com/yacy" target="_blank"><i class="fa fa-github-square fa-fw"></i>GitHub</a>
    </li>
    

    

    

    

    

    

    

    

    

    

    

    

    

  </ul>
</div>


  <div>
  <div class="small-print">
    <small></small>
  </div>
  <div class="small-print">
    <small>Built with&nbsp;<a href="https://gohugo.io/" target="_blank">Hugo</a></small>
    <small>Theme&nbsp;<a href="https://github.com/yoshiharuyamashita/blackburn" target="_blank">Blackburn</a></small>
  </div>
</div>

</div>


  <div id="main">


<div class="header">
  <h1></h1>
  <h2></h2>
</div>
<div class="content">
  

<h1 id="ffmpeg-on-macos-with-blackmagic">ffmpeg on MacOS with Blackmagic</h1>

<p>Date: 2014-12-05 20:54:56</p>

<p><a href="http://www.dnalounge.com/webcast/"><img src="http://www.dnalounge.com/webcast/colorbars-anim.gif" alt="" /></a>Things
are bleak when ffmpeg might make things BETTER than what you were doing
before.</p>

<p>Lazyweb, earn your keep:</p>

<p>How do I get video out of a BlackMagic SDI-to-HDMI 4K MiniConverter
using ffmpeg on MacOS?</p>

<p>I installed it like this:</p>

<blockquote>
<p><code>port install ffmpeg +nonfree +librtmp +libdc1394</code></p>
</blockquote>

<p>I gather that the following incantation should list available input
devices, but it freaks out halfway through:</p>

<blockquote>
<p><code>ffmpeg -list_devices true -f avfoundation -i dummy ffmpeg version 2.3.3 Copyright (c) 2000-2014 the FFmpeg developers built on Aug 21 2014 20:56:05 with Apple clang version 4.1 (tags/Apple/clang-421.11.66) (based on LLVM 3.1svn) configuration: --prefix=/opt/local --enable-swscale --enable-avfilter --enable-avresample --enable-libmp3lame --enable-libvorbis --enable-libopus --enable-libtheora --enable-libschroedinger --enable-libopenjpeg --enable-libmodplug --enable-libvpx --enable-libspeex --enable-libass --enable-libbluray --enable-gnutls --enable-fontconfig --enable-libfreetype --enable-libfribidi --disable-indev=jack --disable-outdev=xv --mandir=/opt/local/share/man --enable-shared --enable-pthreads --cc=/usr/bin/clang --enable-vda --arch=x86_64 --enable-yasm --enable-libdc1394 --enable-librtmp --enable-gpl --enable-postproc --enable-libx264 --enable-libxvid --enable-nonfree --enable-libfdk-aac --enable-libfaac libavutil 52. 92.100 / 52. 92.100 libavcodec 55. 69.100 / 55. 69.100 libavformat 55. 48.100 / 55. 48.100 libavdevice 55. 13.102 / 55. 13.102 libavfilter 4. 11.100 / 4. 11.100 libavresample 1. 3. 0 / 1. 3. 0 libswscale 2. 6.100 / 2. 6.100 libswresample 0. 19.100 / 0. 19.100 libpostproc 52. 3.100 / 52. 3.100 [AVFoundation input device @ 0x7f935ac2d3e0] AVFoundation video devices: [AVFoundation input device @ 0x7f935ac2d3e0] [0] Blackmagic dummy: Input/output error Exit 1</code>{style=&ldquo;font-size:smaller&rdquo;}</p>
</blockquote>

<p>My reading of various cargo-cult droppings suggested that my command
might look something like:</p>

<blockquote>
<p><code>cmd=&quot;ffmpeg -f avfoundation&quot; cmd=&quot;$cmd -i video=Blackmagic&quot;          #</code>{style=&ldquo;font-size:smaller&rdquo;}<em>device</em><br />
<code>cmd=&quot;$cmd -video_size 1280x720&quot;         #</code><em>input video size</em><br />
<code>cmd=&quot;$cmd -framerate 60&quot;                #</code><em>input video frame rate</em><br />
<code>cmd=&quot;$cmd -r 15&quot;                        #</code><em>output video fps</em><br />
<code>cmd=&quot;$cmd -g 30&quot;                        #</code><em>output motion
estimation?</em><br />
<code>cmd=&quot;$cmd -maxrate 350k&quot;                #</code><em>output video rate</em><br />
<code>cmd=&quot;$cmd -bufsize 700k&quot;                #</code><em>output video rate</em><br />
<code>#cmd=&quot;$cmd  -rtbufsize 702000k&quot;         #</code> <em>output video rate?</em><br />
<code>cmd=&quot;$cmd -vf scale=640:-1,format=yuv420p&quot;     #</code><em>output video
size</em><br />
<code>cmd=&quot;$cmd -threads 4&quot;                   #</code><em>tune this?</em><br />
<code>cmd=&quot;$cmd -acodec libmp3lame&quot;           #</code><em>output audio codec</em><br />
<code>cmd=&quot;$cmd -ac 2&quot;                        #</code><em>output audio channels</em><br />
<code>cmd=&quot;$cmd -b:a 96k&quot;                     #</code><em>output audio bps</em><br />
<code>cmd=&quot;$cmd -ar 44100&quot;                    #</code><em>output audio Hz</em><br />
<code>cmd=&quot;$cmd -vcodec libx264&quot;              #</code><em>output video codec</em><br />
<code>cmd=&quot;$cmd -crf 23&quot;                      #</code><em>constant rate factor. 0
= lossless, 18 good, 23 default, 51 worst</em><br />
<code>cmd=&quot;$cmd -preset ultrafast&quot;            #</code><em>little compression, high
bitrate</em><br />
<code>cmd=&quot;$cmd -f mpegts&quot;                    #</code><em>MPEG-TS packets, CBR
MPEG</em><br />
<code>cmd=&quot;$cmd -f flv&quot; cmd=&quot;$cmd rtmp://a.rtmp.youtube.com/live2/[REDACTED]&quot;</code></p>
</blockquote>

<p>But that fails:</p>

<blockquote>
<p><code>[avfoundation @ 0x7f8d3b82cc00] Failed to create AV capture input device: Cannot Use Blackmagic Blackmagic: Input/output error</code>{style=&ldquo;font-size:smaller&rdquo;}</p>
</blockquote>

<p>Also, how do I tell it to take video from Blackmagic but encode
<em>silence</em> as audio? Not \&ldquo;no audio stream\&ldquo;, but rather, \&ldquo;there is an
audio stream and it is silent\&ldquo;?</p>

<p>Also, how do I tell it to take video from Blackmagic but audio from the
Mac\&rsquo;s built-in analog line-in jack?</p>

<p><a href="http://www.jwz.org/blog/2014/12/aaaaaaaahhhhhh-everything-is-terrible/">Previously</a>,
<a href="http://www.jwz.org/blog/2014/08/fmle-app-works-but-fmlecmd-does-not/">previously</a>,
<a href="http://www.jwz.org/blog/2014/08/webcast-video-help-needed/">previously</a>.</p>

</div>

</div>
</div>
<script src="js/ui.js"></script>






</body>
</html>

