Dev:SolrCloud
=============

Date: 2014-01-12 23:58:02

[Create Tomcat Configuration of Solr Web Services: ]{.autocomment} more
configuration of the solr.xml and subdirectories needed

← Nächstältere Version

Version vom 12. Januar 2014, 22:58 Uhr

(2 dazwischenliegende Versionen von einem Benutzer werden nicht
angezeigt)

Zeile 88:

Zeile 88:

 

 

 

<div>

==== Create Solr Configuration of Solr Cores for YaCy Inside Zookeeper
====

</div>

 

<div>

==== Create Solr Configuration of Solr Cores for YaCy Inside Zookeeper
====

</div>

−

<div>

~~We need a storage place for the YaCy index data, generated by Solr and
a location to fabricate a default index schema for Solr. This shall be
placed in /var/opt/solrcloud/:~~

</div>

 

−

<div>

~~mkdir /var/opt/solrcloud/~~

</div>

 

 

<div>

For a detailed description of the set-up of Solr Clusters and a
SolrCloud configuration, see the
\[\[http://wiki.apache.org/solr/SolrCloud SolrCloud Wiki of
apache.org\]\], the \[\[http://wiki.apache.org/solr/SolrCloudTomcat
SolrCloud Installation in Tomcat\]\], a
\[\[http://systemsarchitect.net/painless-guide-to-solr-cloud-configuration/
Guide to SolrCloud Configuration\]\] and a
\[\[http://myjeeva.com/solrcloud-cluster-single-collection-deployment.html
SolrCloud Cluster (Single Collection) Deployment\]\].

</div>

 

<div>

For a detailed description of the set-up of Solr Clusters and a
SolrCloud configuration, see the
\[\[http://wiki.apache.org/solr/SolrCloud SolrCloud Wiki of
apache.org\]\], the \[\[http://wiki.apache.org/solr/SolrCloudTomcat
SolrCloud Installation in Tomcat\]\], a
\[\[http://systemsarchitect.net/painless-guide-to-solr-cloud-configuration/
Guide to SolrCloud Configuration\]\] and a
\[\[http://myjeeva.com/solrcloud-cluster-single-collection-deployment.html
SolrCloud Cluster (Single Collection) Deployment\]\].

</div>

 

<div>

To upload the solr configuration in Zookeeper, we use the solr config
directory from YaCy as a generic index configuration including a generic
schema.xml:

</div>

 

<div>

To upload the solr configuration in Zookeeper, we use the solr config
directory from YaCy as a generic index configuration including a generic
schema.xml:

</div>

Zeile 101:

Zeile 99:

 

 

 

<div>

==== Create Tomcat Configuration of Solr Web Services ====

</div>

 

<div>

==== Create Tomcat Configuration of Solr Web Services ====

</div>

−

<div>

We want to use four Solr servers as a SolrCloud, each with two cores
(\'collection1\' and \'webgraph\'). We create subdirectories for the
servers inside of /var/~~lib~~/~~tomcat6~~/~~yacyindex~~:

</div>

\+

<div>

We want to use four Solr servers as a SolrCloud, each with two cores
(\'collection1\' and \'webgraph\'). We create subdirectories for the
servers inside of /var/[opt]{.underline}/[solrcloud]{.underline}/:

</div>

 

\+

<div>

[mkdir /var/opt/solrcloud/]{.underline}

</div>

 

<div>

  mkdir /var/opt/solrcloud/solr0

</div>

 

<div>

  mkdir /var/opt/solrcloud/solr0

</div>

 

<div>

  mkdir /var/opt/solrcloud/solr1

</div>

 

<div>

  mkdir /var/opt/solrcloud/solr1

</div>

Zeile 111:

Zeile 110:

 

<div>

   \<int name=\"coreLoadThreads\"\>4\</int\>

</div>

 

<div>

   \<int name=\"coreLoadThreads\"\>4\</int\>

</div>

 

<div>

   \<solrcloud\>

</div>

 

<div>

   \<solrcloud\>

</div>

−

<div>

     \<int name=\"hostPort\"\>8080\</int\>

</div>

\+

<div>

[    \<str name=\"host\"\>localhost\</str\>            \<!\-- replace
this without your host name of the shard server \--\>]{.underline}

</div>

−

<div>

     \<str name=\"hostContext\"\>solr0\</str\>

</div>

\+

<div>

     \<int name=\"hostPort\"\>8080\</int[\>            \<!\-- replace
this with the port of your host of the shard \--]{.underline}\>

</div>

−

<div>

     \<str name=\"zkHost\"\>localhost:2181\</str\>

</div>

\+

<div>

     \<str name=\"hostContext\"\>solr0\</str[\>        \<!\-- replace
this with the shard name \--]{.underline}\>

</div>

 

\+

<div>

     \<str name=\"zkHost\"\>localhost:2181[\</str\>    \<!\-- replace
this with the zookeeper host address \--\>]{.underline}

</div>

 

\+

<div>

[    \<int
name=\"zkClientTimeout\"\>\${solr.zkclienttimeout:30000}\</int\>]{.underline}

</div>

 

\+

<div>

[    \<str
name=\"shareSchema\"\>\${shareSchema:false}\</str\>]{.underline}

</div>

 

\+

<div>

[    \<str
name=\"genericCoreNodeNames\"\>\${genericCoreNodeNames:true}]{.underline}\</str\>

</div>

 

<div>

   \</solrcloud\>

</div>

 

<div>

   \</solrcloud\>

</div>

 

<div>

   \<shardHandlerFactory name=\"shardHandlerFactory\"
class=\"HttpShardHandlerFactory\"\>

</div>

 

<div>

   \<shardHandlerFactory name=\"shardHandlerFactory\"
class=\"HttpShardHandlerFactory\"\>

</div>

Zeile 120:

Zeile 123:

 

<div>

   \</shardHandlerFactory\>

</div>

 

<div>

   \</shardHandlerFactory\>

</div>

 

<div>

  \</solr\>

</div>

 

<div>

  \</solr\>

</div>

−

<div>

In each of the solr1 .. solr3 ~~subdirectories~~, copy this solr.xml and
patch the hostContext attribute to solr1 .. solr3.

</div>

\+

<div>

In each of the solr1 .. solr3 [directories]{.underline}, copy this
solr.xml and patch the hostContext attribute to solr1 ..
solr3[.]{.underline}

</div>

 

\+

<div>

[In each of the solr0 .. solr3 directories, create directories
\'collection1\' and \'webgraph\' and put a (empty) file named
\'core.properties\' and a subdirecty \'data\' inside]{.underline}.

</div>

 

 

 

<div>

To deploy Solr with the YaCy configuration you must create a Tomcat
Context fragment for each Solr instance. A Tomcat Context Fragment is a
file in /var/lib/tomcat6/conf/Catalina/localhost. Therefore, we must
create four files, one for each Solr server, in this directory: write a
file to /var/lib/tomcat6/conf/Catalina/localhost/solr0.xml with the
following content:

</div>

 

<div>

To deploy Solr with the YaCy configuration you must create a Tomcat
Context fragment for each Solr instance. A Tomcat Context Fragment is a
file in /var/lib/tomcat6/conf/Catalina/localhost. Therefore, we must
create four files, one for each Solr server, in this directory: write a
file to /var/lib/tomcat6/conf/Catalina/localhost/solr0.xml with the
following content:

</div>
